<!DOCTYPE html>
<html>
<head>
  <title>Player Connection Test</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
</head>
<body>
  <h1>Connected Players: <span id="playerCount">0</span></h1>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyB2gG_CJk2nWXWSo1eS-C6tyEArzgZAU7Q",
      authDomain: "afwi-online.firebaseapp.com",
      databaseURL: "https://afwi-online-default-rtdb.firebaseio.com",
      projectId: "afwi-online",
      storageBucket: "afwi-online.firebasestorage.app",
      messagingSenderId: "342205190998",
      appId: "1:342205190998:web:fac309391e90aa61eabcf7",
      measurementId: "G-7LF1W3ETRN"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const userRef = db.ref("connectedUsers");

    // Add this user to the list of connected users
    const newUserRef = userRef.push(true);

    // Remove on disconnect
    newUserRef.onDisconnect().remove();

    // Count connected users
    userRef.on("value", snapshot => {
      const count = snapshot.numChildren();
      document.getElementById("playerCount").textContent = count;
    });
  </script>
</body>
</html>
